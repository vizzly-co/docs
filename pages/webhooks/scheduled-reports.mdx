import { Callout } from "nextra-theme-docs";

# Scheduled reports 

Scheduled reports allow you to send reports in any format you choose, to your users
who have decided how often they want a report.

A report is generated by your users creating a "basic table" component on their dashboard,
and then selecting the "reports" option in the component menu.

<img style={{width: "300px"}} src="/img/reports-option-in-component-menu.png" />

Vizzly manages the time-keeping of such reports, and sends you a webhook
containing the query needed to generated the results for the report at the time your user wants it.

Once you have [set up the webhook](./get-started) and linked it to the dashboard template, you
can add the property `reportScheduleOptions` to the Vizzly Dashboard component, and set the
frequency values that you want to be made available to your users to choose from. For example,
you might set;

```jsx
<Vizzly.Dashboard
  // ... the other props
  reportScheduleOptions={[
    {cron: '* * * * *', description: 'Every minute'},
    {cron: '0 * * * *', description: 'Every hour'}
  ]}
/>
```

which would allow your users to pick from an "every minute", or an "every hour" schedule.

### The webhook event

An example of the event you'll receive for scheduled reports.

You'll receive a [query](/concepts/query) which you can use with the data access token generated
in your [identity callback](/dashboard/callbacks/identity) to call the [query engine's create results endpoint](/query-engines/self-hosted/api/create-results).

```json
{
  "type": "report.scheduled",
  "report": {
    "dashboard_id": "dsh_0b32455d7a614b34833e47b100597419",
    "organisation_id": "org_7e58f56ceff84f80bc529b57f802d638",
    "schedule": "* * * * *",
    "type": "scheduled",
    "user_reference": "user_editor - self-hosted"
  },
  "query": {
    "dataSetId": "stock-data-set",
    "dimension": [],
    "filter": [],
    "limit": 10,
    "offset": 0,
    "measure": [
      {
        "aggregate": "none",
        "field": "Open"
      },
      {
        "aggregate": "none",
        "field": "High"
      },
      {
        "aggregate": "none",
        "field": "Low"
      },
      {
        "aggregate": "none",
        "field": "Close"
      },
      {
        "aggregate": "none",
        "field": "Volume"
      }
    ],
    "order": [
      {
        "aggregate": "none",
        "direction": "asc",
        "field": "Open"
      }
    ],
    "timeDimension": null
  },
  "virtualFields": {}
}
```

<Callout emoji="ðŸ’¡">
Some scheduled report implementations increase the `limit` property
and ensure the `offset` value is `0`. This has the effect of creating a 
full data-set export.
</Callout>